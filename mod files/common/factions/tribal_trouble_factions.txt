# feudalization_faction = {
# 	casus_belli = independence_faction_war
# 	short_effect_desc = feudalization_faction_independance_war_short_effect_desc
# 	sort_order = 1
# 	name = FACTION_FEUDALIZATION_NAME

# 	discontent_progress = {
# 		base = 0

# 		# We use a modifier as our base progress in order to take advantage of script values.
# 		modifier = {
# 			add = base_discontent_progress
# 			desc = "BASE_COLON"
# 		}

# 		# The higher above the power threshold the faction is, the faster discontent increases.
# 		modifier = {
# 			faction_power > faction_power_threshold
# 			add = faction_discontent_for_extra_power
# 			desc = "FACTION_DISCONTENT_POWER_ABOVE_THRESHOLD"
# 		}

# 		# Discontent slowly decays if power is under the threshold.
# 		modifier = {
# 			faction_power < faction_power_threshold
# 			add = {
# 				add = base_discontent_progress
# 				multiply = -2
# 			}
# 			desc = "FACTION_DISCONTENT_POWER_BELOW_THRESHOLD"
# 		}
# 	}

# 	power_threshold = {
# 		base = 80

# 		modifier = {
# 			add = 20
# 			faction_target = {
# 				has_perk = hard_rule_perk
# 			}
# 			desc = "FACTION_POWER_HARD_RULE"
# 		}

# 		dynamic_power_threshold_scripted_modifier = {
# 			FACTION_TYPE1 = claimant_faction
# 			FACTION_TYPE2 = liberty_faction
# 			FACTION_TYPE3 = populist_faction
# 		}
# 	}

# 	is_character_valid = {
# 		scope:faction.faction_target = liege
# 		highest_held_title_tier > tier_barony

# 		#Not blocked through events
# 		custom_description = {
# 			text = character_blocked_from_joining
# 			NOT = {
# 				has_character_flag = joining_faction_block
# 			}
# 		}
# 	}
	
# 	demand = {
# 		save_scope_as = faction

# 		faction_leader = {
# 			save_scope_as = faction_leader
# 		}

# 		faction_target = {
# 			save_scope_as = faction_target
# 		}

# 		# Let the human players in the faction know that the demand will be sent
# 		every_faction_member = {
# 			limit = {
# 				is_ai = no
# 				NOT = { this = scope:faction.faction_leader }
# 			}
# 			trigger_event = faction_demand.0005
# 		}

# 		# Send the actual demand in 5 days
# 		faction_target = {
# 			trigger_event = {
# 				id = faction_demand.0001
# 				days = 5
# 			}
# 		}
# 	}

# 	ai_create_score = {
# 		base = -150 # Base reluctance value we must overcome to start an Independence Faction.

# 		############
# 		# BLOCKERS #

# 		# Refuses to make if there was a recent independence faction revolt.
# 		modifier = {
# 			add = -1000
# 			scope:target = {
# 				has_character_flag = recent_independence_faction_war
# 			}
# 		}

# 		# Do not join a new faction if I am already at war.
# 		modifier = {
# 			add = -1000
# 			is_at_war = yes
# 		}

# 		#######################
# 		# Standard AI Weights #

# 		# +/- 40 join weight at -/+100 opinion
# 		opinion_modifier = {
# 			who = root
# 			opinion_target = scope:target
# 			multiplier = -0.4
# 		}

# 		# for each character.religion != factionTarget.religion add X join-score
# 		pluralism_fundamentalism_modifier = {
# 			ASTRAY_BASE_VALUE = 25
# 			HOSTILE_BASE_VALUE = 50
# 			EVIL_BASE_VALUE = 100
# 			BASE_FAITH = faith
# 			TARGET_FAITH = scope:target.faith
# 		}

# 		modifier = {
# 			add = feudalization_pressure
# 			has_government = tribal_government
# 		}

# 		modifier = {
# 			add = feudalization_desire
# 			has_government = tribal_government
# 		}

# 		modifier = {
# 			add = 500
# 			NOT = { has_government = tribal_government }
# 		}

# 		# Kingdoms gain an additional boost to independence, as they don't like being under the thumb of others.
# 		modifier = {
# 			add = 50
# 			highest_held_title_tier = tier_kingdom
# 		}

# 		# Toe the Line Perk
# 		modifier = {
# 			add = -50
# 			scope:target = {
# 				has_perk = toe_the_line_perk
# 			}
# 		}

# 		# Stem Duchies innovation
# 		modifier = {
# 			add = -25
# 			scope:target = {
# 				culture = {
# 					has_innovation = innovation_stem_duchies
# 				}
# 			}
# 			culture_group = scope:target.culture_group
# 		}

# 		# -100 join chance from intimidation, -1000 join chance from terrified. This modifier doesn't apply if a faction is above the power threshold
# 		intimidated_from_faction_modifier = {
# 			TARGET = scope:target
# 			POWER =  0
# 			THRESHOLD = 80
# 		}

# 		# Debt: +10 to +60 join chance depending on how far in debt the top liege is
# 		liege_debt_modifier = {
# 			TARGET = scope:target
# 			SCORE_PER_DEBT_LEVEL = 10
# 		}

# 		# Difficulty Settings
# 		modifier = { # Easy
# 			add = -50
# 			has_game_rule = easy_difficulty
# 			scope:target = {
# 				is_ai = no
# 			}
# 		}
# 		modifier = { # Very Easy
# 			add = -150
# 			has_game_rule = very_easy_difficulty
# 			scope:target = {
# 				is_ai = no
# 			}
# 		}

# 		# #safe guard to avoid Factions being created when the game starts
# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 1
# 		# 	scope:target.primary_title.tier = tier_duchy
# 		# }

# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 5
# 		# 	scope:target.primary_title.tier = tier_kingdom
# 		# }

# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 10
# 		# 	scope:target.primary_title.tier = tier_empire
# 		# }
# 	}

# 	ai_join_score = {
# 		base = -100 # Base reluctance value we must overcome to start an Independence Faction.

# 		############
# 		# BLOCKERS #

# 		# Refuses to make if there was a recent independence faction revolt.
# 		modifier = {
# 			add = -1000
# 			scope:faction.faction_target = {
# 				has_character_flag = recent_independence_faction_war
# 			}
# 		}

# 		# Do not join a new faction if I am already at war.
# 		modifier = {
# 			add = -1000
# 			is_at_war = yes
# 		}

# 		#######################
# 		# Standard AI Weights #

# 		# +/- 40 join weight at -/+100 opinion
# 		opinion_modifier = {
# 			who = root
# 			opinion_target = scope:faction.faction_target
# 			multiplier = -0.4
# 		}

# 		# for each character.religion != factionTarget.religion add X join-score
# 		# pluralism_fundamentalism_modifier = {
# 		# 	ASTRAY_BASE_VALUE = 25
# 		# 	HOSTILE_BASE_VALUE = 50
# 		# 	EVIL_BASE_VALUE = 100
# 		# 	BASE_FAITH = faith
# 		# 	TARGET_FAITH = scope:faction.faction_target.faith
# 		# }

# 		modifier = {
# 			add = feudalization_pressure
# 			has_government = tribal_government
# 		}

# 		modifier = {
# 			add = feudalization_desire
# 			has_government = tribal_government
# 		}

# 		modifier = {
# 			add = 500
# 			NOT = { has_government = tribal_government }
# 		}

# 		# Kingdoms gain an additional boost to independence, as they don't like being under the thumb of others.
# 		modifier = {
# 			add = 50
# 			highest_held_title_tier = tier_kingdom
# 		}

# 		# Toe the Line Perk
# 		modifier = {
# 			add = -50
# 			scope:faction.faction_target = {
# 				has_perk = toe_the_line_perk
# 			}
# 		}

# 		# Stem Duchies innovation
# 		modifier = {
# 			add = -25
# 			scope:faction.faction_target = {
# 				culture = {
# 					has_innovation = innovation_stem_duchies
# 				}
# 			}
# 			culture_group = scope:faction.faction_target.culture_group
# 		}

# 		# -100 join chance from intimidation, -1000 join chance from terrified. This modifier doesn't apply if a faction is above the power threshold
# 		intimidated_from_faction_modifier = {
# 			TARGET = scope:faction.faction_target
# 			POWER =  0
# 			THRESHOLD = 80
# 		}

# 		# Debt: +10 to +60 join chance depending on how far in debt the top liege is
# 		liege_debt_modifier = {
# 			TARGET = scope:faction.faction_target
# 			SCORE_PER_DEBT_LEVEL = 10
# 		}

# 		# Difficulty Settings
# 		modifier = { # Easy
# 			add = -50
# 			has_game_rule = easy_difficulty
# 			scope:faction.faction_target = {
# 				is_ai = no
# 			}
# 		}
# 		modifier = { # Very Easy
# 			add = -150
# 			has_game_rule = very_easy_difficulty
# 			scope:faction.faction_target = {
# 				is_ai = no
# 			}
# 		}

# 		# #safe guard to avoid Factions being created when the game starts
# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 1
# 		# 	scope:target.primary_title.tier = tier_duchy
# 		# }

# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 5
# 		# 	scope:target.primary_title.tier = tier_kingdom
# 		# }

# 		# modifier = {
# 		# 	add = -10000
# 		# 	years_from_game_start < 10
# 		# 	scope:target.primary_title.tier = tier_empire
# 		# }

# 		# Small multiplier for my neighbors already in the Faction
# 		modifier = {
# 			factor = {
# 				value = 1
# 		    	every_faction_member = {
# 		    		if = {
# 		    			limit = {
# 			    			any_neighboring_realm_same_rank_owner = {
# 			    				this = root
# 			    			}
# 						}
# 		    			add = 0.25
# 		    		}		
# 		    	}
# 	    	}
# 	    }
# 	}

# 	ai_demand_chance = {
# 		base = 0

# 		# 40% base chance at minimum power (80%), increasing linearly
# 		compare_modifier = {
# 			value = faction_power
# 			multiplier = 0.5
# 		}

# 		# Once the faction has a good chance to win (10% stronger than liege) demand chance increases much more rapidly.
# 		compare_modifier = {
# 			trigger = {	faction_power > 110 }
# 			value = faction_power
# 			multiplier = 1
# 		}

# 		modifier = {
# 			add = 100
# 			faction_target = {
# 				is_at_war = yes # Independence Factions are opportunistic bastards!
# 			}
# 		}
# 	}

# 	can_character_join = {
# 		is_independent_ruler = no
# 		liege = scope:faction.faction_target
# 		NOT = { is_allied_to = scope:faction.faction_target }
# 		scope:faction.faction_target = {
# 			NOT = { has_strong_hook = root }
# 		}

# 		OR = {
# 			is_ai = no
# 			NOR = {
# 				has_relation_lover = scope:faction.faction_target
# 				has_relation_friend = scope:faction.faction_target
# 			}
# 		}
# 		scope:faction.faction_target.highest_held_title_tier > tier_county

# 		custom_description = {
# 			text = character_has_faction_disabling_modifier
# 			character_has_faction_disabling_modifier_trigger = yes
# 		}
# 	}

# 	can_character_create = {
# 		is_independent_ruler = no
# 		liege = scope:target
# 		NOR = { #No prince-bishop can ever join
# 			has_government = theocracy_government
# 			AND = {
# 				exists = liege.cp:councillor_court_chaplain
# 				this = liege.cp:councillor_court_chaplain
# 			}
# 		}

# 		NOT = { is_allied_to = scope:target }
# 		NOT = { has_truce = scope:target }
# 		scope:target = {
# 			NOT = { has_strong_hook = root }
# 		}

# 		OR = {
# 			is_ai = no
# 			NOR = {
# 				has_relation_lover = scope:target
# 				has_relation_friend = scope:target
# 			}
# 		}
# 		scope:target.highest_held_title_tier > tier_county
# 		highest_held_title_tier > tier_barony

# 		####
# 		# BLOCKERS
# 		####
# 		# General Faction immunity
# 		custom_description = {
# 			text = character_is_immune_to_factions
# 			subject = scope:target
# 			NOT = { scope:target = { immune_to_factions_trigger = yes } }
# 		}

# 		custom_description = {
# 			text = character_has_faction_disabling_modifier
# 			character_has_faction_disabling_modifier_trigger = yes
# 		}
# 	}

# 	county_create_score = {
# 		base = -100
# 		modifier = {
# 			add = {
# 				add = development_level
# 				multiply = feudalization_pressure_county
# 				multiply = 100
# 			}
# 			any_county_province = {
# 				has_holding_type = tribal_holding
# 			}
# 		}
# 		modifier = {
# 			add = 1000
# 			NOT = {
# 				any_county_province = {
# 					has_holding_type = tribal_holding
# 				}
# 			}
# 		}
# 	}

# 	county_join_score = {
# 		base = -75
# 		modifier = {
# 			add = {
# 				add = development_level
# 				multiply = feudalization_pressure_county
# 				multiply = 100
# 			}
# 			any_county_province = {
# 				has_holding_type = tribal_holding
# 			}
# 		}
# 		modifier = {
# 			add = 1000
# 			any_county_province = {
# 				has_holding_type = tribal_holding
# 				count = 0
# 			}
# 		}
# 	}

# 	county_allow_join = yes
# 	county_allow_create = no
# }
